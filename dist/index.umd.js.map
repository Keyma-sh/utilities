{"version":3,"file":"index.umd.js","sources":["../src/lib/codeBlock.ts","../src/lib/splitText.ts","../src/lib/isObject.ts","../src/lib/isPrimitive.ts","../src/lib/deepClone.ts","../src/lib/inlineCodeBlock.ts","../src/lib/isFunction.ts","../src/lib/isNullOrUndefined.ts","../../../node_modules/@sapphire/rollup-plugin-node-polyfills/polyfills/punycode.js","../../../node_modules/@sapphire/rollup-plugin-node-polyfills/polyfills/util.js","../../../node_modules/@sapphire/rollup-plugin-node-polyfills/polyfills/qs.js","../../../node_modules/@sapphire/rollup-plugin-node-polyfills/polyfills/url.js","../src/lib/regExpEsc.ts","../src/lib/toTitleCase.ts","../src/lib/arrayStrictEquals.ts","../src/lib/chunk.ts","../src/lib/classExtends.ts","../src/lib/cutText.ts","../src/lib/debounce/index.ts","../src/lib/isClass.ts","../src/lib/isNumber.ts","../src/lib/isThenable.ts","../src/lib/makeObject.ts","../src/lib/mergeDefault.ts","../src/lib/mergeObjects.ts","../src/lib/noop.ts","../src/lib/objectToTuples.ts","../src/lib/parseUrl.ts","../src/lib/range.ts","../src/lib/roundNumber.ts","../src/lib/tryParse.ts"],"sourcesContent":["const zws = String.fromCharCode(8203);\n\n/**\n * Wraps text in a markdown codeblock with optionally a language indicator for syntax highlighting\n * @param language The codeblock language\n * @param expression The expression to be wrapped in the codeblock\n */\nexport function codeBlock<T extends unknown>(language: string, expression: T): string {\n\tif (typeof expression === 'string') {\n\t\tif (expression.length === 0) return `\\`\\`\\`${zws}\\`\\`\\``;\n\t\treturn `\\`\\`\\`${language}\\n${expression.replace(/```/, `\\`${zws}\\`\\``).replace(/`$/g, `\\`${zws}`)}\\`\\`\\``;\n\t}\n\treturn `\\`\\`\\`${language}\\n${expression || zws}\\`\\`\\``;\n}\n","/**\n * Split a string by its latest space character in a range from the character 0 to the selected one.\n * @param str The text to split.\n * @param length The length of the desired string.\n * @param char The character to split with\n * @copyright 2019 Antonio Rom√°n\n * @license Apache-2.0\n */\nexport function splitText(str: string, length: number, char = ' ') {\n\tconst x = str.substring(0, length).lastIndexOf(char);\n\tconst pos = x === -1 ? length : x;\n\treturn str.substring(0, pos);\n}\n","/* eslint-disable @typescript-eslint/ban-types */\n/**\n * Verify if the input is an object literal (or class).\n * @param input The object to verify\n */\nexport function isObject(input: unknown): input is Record<PropertyKey, unknown> | object {\n\treturn typeof input === 'object' && input ? input.constructor === Object : false;\n}\n","const primitiveTypes = ['string', 'bigint', 'number', 'boolean'];\n\n/**\n * Check whether a value is a primitive\n * @param input The input to check\n */\nexport function isPrimitive(input: unknown): input is string | bigint | number | boolean {\n\treturn primitiveTypes.includes(typeof input);\n}\n","import { isObject } from './isObject';\nimport { isPrimitive } from './isPrimitive';\n\n/**\n * Deep clone an object\n * @param source The object to clone\n */\nexport function deepClone<T>(source: T): T {\n\t// Check if it's a primitive (with exception of function and null, which is typeof object)\n\tif (source === null || isPrimitive(source)) return source;\n\tif (Array.isArray(source)) {\n\t\tconst output = ([] as unknown) as T & T extends (infer S)[] ? S[] : never;\n\t\tfor (const value of source) output.push(deepClone(value));\n\t\treturn (output as unknown) as T;\n\t}\n\tif (isObject(source)) {\n\t\tconst output = {} as Record<PropertyKey, unknown>;\n\t\tfor (const [key, value] of Object.entries(source)) output[key] = deepClone(value);\n\t\treturn (output as unknown) as T;\n\t}\n\tif (source instanceof Map) {\n\t\tconst output = (new (source.constructor as MapConstructor)() as unknown) as T & T extends Map<infer K, infer V> ? Map<K, V> : never;\n\t\tfor (const [key, value] of source.entries()) output.set(key, deepClone(value));\n\t\treturn (output as unknown) as T;\n\t}\n\tif (source instanceof Set) {\n\t\tconst output = (new (source.constructor as SetConstructor)() as unknown) as T & T extends Set<infer K> ? Set<K> : never;\n\t\tfor (const value of source.values()) output.add(deepClone(value));\n\t\treturn (output as unknown) as T;\n\t}\n\treturn source;\n}\n","const zws = String.fromCharCode(8203);\n\n/**\n * Wraps text in a markdown inline codeblock\n * @param expression The expression to be wrapped in the codeblock\n */\nexport function inlineCodeBlock(input: string): string {\n\treturn `\\`${input.replace(/ /g, '\\u00A0').replace(/`/g, `\\`${zws}`)}\\``;\n}\n","/**\n * Verify if the input is a function.\n * @param input The function to verify\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function isFunction(input: unknown): input is Function {\n\treturn typeof input === 'function';\n}\n","/**\n * Checks whether or not a value is null or undefined\n * @param value The value to check\n */\nexport function isNullOrUndefined(value: unknown): value is undefined | null {\n\treturn value === undefined || value === null;\n}\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n\n/** Highest positive signed 32-bit float value */\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nvar regexPunycode = /^xn--/;\nvar regexNonASCII = /[^\\x20-\\x7E]/; // unprintable ASCII chars + non-ASCII chars\nvar regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nvar errors = {\n\toverflow: 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nvar baseMinusTMin = base - tMin;\nvar floor = Math.floor;\nvar stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tvar length = array.length;\n\tvar result = [];\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tvar parts = string.split('@');\n\tvar result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tvar labels = string.split('.');\n\tvar encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tvar output = [],\n\t\tcounter = 0,\n\t\tlength = string.length,\n\t\tvalue,\n\t\textra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xd800 && value <= 0xdbff && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xfc00) == 0xdc00) {\n\t\t\t\t// low surrogate\n\t\t\t\toutput.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nfunction ucs2encode(array) {\n\treturn map(array, function (value) {\n\t\tvar output = '';\n\t\tif (value > 0xffff) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(((value >>> 10) & 0x3ff) | 0xd800);\n\t\t\tvalue = 0xdc00 | (value & 0x3ff);\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t\treturn output;\n\t}).join('');\n}\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nfunction basicToDigit(codePoint) {\n\tif (codePoint - 48 < 10) {\n\t\treturn codePoint - 22;\n\t}\n\tif (codePoint - 65 < 26) {\n\t\treturn codePoint - 65;\n\t}\n\tif (codePoint - 97 < 26) {\n\t\treturn codePoint - 97;\n\t}\n\treturn base;\n}\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nfunction digitToBasic(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n}\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nfunction adapt(delta, numPoints, firstTime) {\n\tvar k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (; /* no initialization */ delta > (baseMinusTMin * tMax) >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + ((baseMinusTMin + 1) * delta) / (delta + skew));\n}\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nexport function decode(input) {\n\t// Don't use UCS-2\n\tvar output = [],\n\t\tinputLength = input.length,\n\t\tout,\n\t\ti = 0,\n\t\tn = initialN,\n\t\tbias = initialBias,\n\t\tbasic,\n\t\tj,\n\t\tindex,\n\t\toldi,\n\t\tw,\n\t\tk,\n\t\tdigit,\n\t\tt,\n\t\t/** Cached calculation results */\n\t\tbaseMinusT;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tbasic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength /* no final expression */; ) {\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tfor (oldi = i, w = 1, k = base /* no condition */; ; k += base) {\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror('invalid-input');\n\t\t\t}\n\n\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tt = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tbaseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\t\t}\n\n\t\tout = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output\n\t\toutput.splice(i++, 0, n);\n\t}\n\n\treturn ucs2encode(output);\n}\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nexport function encode(input) {\n\tvar n,\n\t\tdelta,\n\t\thandledCPCount,\n\t\tbasicLength,\n\t\tbias,\n\t\tj,\n\t\tm,\n\t\tq,\n\t\tk,\n\t\tt,\n\t\tcurrentValue,\n\t\toutput = [],\n\t\t/** `inputLength` will hold the number of code points in `input`. */\n\t\tinputLength,\n\t\t/** Cached calculation results */\n\t\thandledCPCountPlusOne,\n\t\tbaseMinusT,\n\t\tqMinusT;\n\n\t// Convert the input in UCS-2 to Unicode\n\tinput = ucs2decode(input);\n\n\t// Cache the length\n\tinputLength = input.length;\n\n\t// Initialize the state\n\tn = initialN;\n\tdelta = 0;\n\tbias = initialBias;\n\n\t// Handle the basic code points\n\tfor (j = 0; j < inputLength; ++j) {\n\t\tcurrentValue = input[j];\n\t\tif (currentValue < 0x80) {\n\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t}\n\t}\n\n\thandledCPCount = basicLength = output.length;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string - if it is not empty - with a delimiter\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\tm = currentValue;\n\t\t\t}\n\t\t}\n\n\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t// but guard against overflow\n\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\n\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tif (currentValue == n) {\n\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\tfor (q = delta, k = base /* no condition */; ; k += base) {\n\t\t\t\t\tt = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(t + (qMinusT % baseMinusT), 0)));\n\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t}\n\n\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\tdelta = 0;\n\t\t\t\t++handledCPCount;\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\t}\n\treturn output.join('');\n}\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nexport function toUnicode(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n\t});\n}\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nexport function toASCII(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexNonASCII.test(string) ? 'xn--' + encode(string) : string;\n\t});\n}\nexport var version = '1.4.1';\n/**\n * An object of methods to convert from JavaScript's internal character\n * representation (UCS-2) to Unicode code points, and back.\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode\n * @type Object\n */\n\nexport var ucs2 = {\n\tdecode: ucs2decode,\n\tencode: ucs2encode\n};\nexport default {\n\tversion: version,\n\tucs2: ucs2,\n\ttoASCII: toASCII,\n\ttoUnicode: toUnicode,\n\tencode: encode,\n\tdecode: decode\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nimport process from 'process';\nvar formatRegExp = /%[sdj%]/g;\nexport function format(f) {\n\tif (!isString(f)) {\n\t\tvar objects = [];\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tobjects.push(inspect(arguments[i]));\n\t\t}\n\t\treturn objects.join(' ');\n\t}\n\n\tvar i = 1;\n\tvar args = arguments;\n\tvar len = args.length;\n\tvar str = String(f).replace(formatRegExp, function (x) {\n\t\tif (x === '%%') return '%';\n\t\tif (i >= len) return x;\n\t\tswitch (x) {\n\t\t\tcase '%s':\n\t\t\t\treturn String(args[i++]);\n\t\t\tcase '%d':\n\t\t\t\treturn Number(args[i++]);\n\t\t\tcase '%j':\n\t\t\t\ttry {\n\t\t\t\t\treturn JSON.stringify(args[i++]);\n\t\t\t\t} catch (_) {\n\t\t\t\t\treturn '[Circular]';\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn x;\n\t\t}\n\t});\n\tfor (var x = args[i]; i < len; x = args[++i]) {\n\t\tif (isNull(x) || !isObject(x)) {\n\t\t\tstr += ' ' + x;\n\t\t} else {\n\t\t\tstr += ' ' + inspect(x);\n\t\t}\n\t}\n\treturn str;\n}\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexport function deprecate(fn, msg) {\n\t// Allow for deprecating things in the process of starting up.\n\tif (isUndefined(global.process)) {\n\t\treturn function () {\n\t\t\treturn deprecate(fn, msg).apply(this, arguments);\n\t\t};\n\t}\n\n\tif (process.noDeprecation === true) {\n\t\treturn fn;\n\t}\n\n\tvar warned = false;\n\tfunction deprecated() {\n\t\tif (!warned) {\n\t\t\tif (process.throwDeprecation) {\n\t\t\t\tthrow new Error(msg);\n\t\t\t} else if (process.traceDeprecation) {\n\t\t\t\tconsole.trace(msg);\n\t\t\t} else {\n\t\t\t\tconsole.error(msg);\n\t\t\t}\n\t\t\twarned = true;\n\t\t}\n\t\treturn fn.apply(this, arguments);\n\t}\n\n\treturn deprecated;\n}\n\nvar debugs = {};\nvar debugEnviron;\nexport function debuglog(set) {\n\tif (isUndefined(debugEnviron)) debugEnviron = process.env.NODE_DEBUG || '';\n\tset = set.toUpperCase();\n\tif (!debugs[set]) {\n\t\tif (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n\t\t\tvar pid = 0;\n\t\t\tdebugs[set] = function () {\n\t\t\t\tvar msg = format.apply(null, arguments);\n\t\t\t\tconsole.error('%s %d: %s', set, pid, msg);\n\t\t\t};\n\t\t} else {\n\t\t\tdebugs[set] = function () {};\n\t\t}\n\t}\n\treturn debugs[set];\n}\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nexport function inspect(obj, opts) {\n\t// default options\n\tvar ctx = {\n\t\tseen: [],\n\t\tstylize: stylizeNoColor\n\t};\n\t// legacy...\n\tif (arguments.length >= 3) ctx.depth = arguments[2];\n\tif (arguments.length >= 4) ctx.colors = arguments[3];\n\tif (isBoolean(opts)) {\n\t\t// legacy...\n\t\tctx.showHidden = opts;\n\t} else if (opts) {\n\t\t// got an \"options\" object\n\t\t_extend(ctx, opts);\n\t}\n\t// set default options\n\tif (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n\tif (isUndefined(ctx.depth)) ctx.depth = 2;\n\tif (isUndefined(ctx.colors)) ctx.colors = false;\n\tif (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n\tif (ctx.colors) ctx.stylize = stylizeWithColor;\n\treturn formatValue(ctx, obj, ctx.depth);\n}\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n\tbold: [1, 22],\n\titalic: [3, 23],\n\tunderline: [4, 24],\n\tinverse: [7, 27],\n\twhite: [37, 39],\n\tgrey: [90, 39],\n\tblack: [30, 39],\n\tblue: [34, 39],\n\tcyan: [36, 39],\n\tgreen: [32, 39],\n\tmagenta: [35, 39],\n\tred: [31, 39],\n\tyellow: [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n\tspecial: 'cyan',\n\tnumber: 'yellow',\n\tboolean: 'yellow',\n\tundefined: 'grey',\n\tnull: 'bold',\n\tstring: 'green',\n\tdate: 'magenta',\n\t// \"name\": intentionally not styling\n\tregexp: 'red'\n};\n\nfunction stylizeWithColor(str, styleType) {\n\tvar style = inspect.styles[styleType];\n\n\tif (style) {\n\t\treturn '\\u001b[' + inspect.colors[style][0] + 'm' + str + '\\u001b[' + inspect.colors[style][1] + 'm';\n\t} else {\n\t\treturn str;\n\t}\n}\n\nfunction stylizeNoColor(str, styleType) {\n\treturn str;\n}\n\nfunction arrayToHash(array) {\n\tvar hash = {};\n\n\tarray.forEach(function (val, idx) {\n\t\thash[val] = true;\n\t});\n\n\treturn hash;\n}\n\nfunction formatValue(ctx, value, recurseTimes) {\n\t// Provide a hook for user-specified inspect functions.\n\t// Check that value is an object with an inspect function on it\n\tif (\n\t\tctx.customInspect &&\n\t\tvalue &&\n\t\tisFunction(value.inspect) &&\n\t\t// Filter out the util module, it's inspect function is special\n\t\tvalue.inspect !== inspect &&\n\t\t// Also filter out any prototype objects using the circular check.\n\t\t!(value.constructor && value.constructor.prototype === value)\n\t) {\n\t\tvar ret = value.inspect(recurseTimes, ctx);\n\t\tif (!isString(ret)) {\n\t\t\tret = formatValue(ctx, ret, recurseTimes);\n\t\t}\n\t\treturn ret;\n\t}\n\n\t// Primitive types cannot have properties\n\tvar primitive = formatPrimitive(ctx, value);\n\tif (primitive) {\n\t\treturn primitive;\n\t}\n\n\t// Look up the keys of the object.\n\tvar keys = Object.keys(value);\n\tvar visibleKeys = arrayToHash(keys);\n\n\tif (ctx.showHidden) {\n\t\tkeys = Object.getOwnPropertyNames(value);\n\t}\n\n\t// IE doesn't make error fields non-enumerable\n\t// http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n\tif (isError(value) && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n\t\treturn formatError(value);\n\t}\n\n\t// Some type of object without properties can be shortcutted.\n\tif (keys.length === 0) {\n\t\tif (isFunction(value)) {\n\t\t\tvar name = value.name ? ': ' + value.name : '';\n\t\t\treturn ctx.stylize('[Function' + name + ']', 'special');\n\t\t}\n\t\tif (isRegExp(value)) {\n\t\t\treturn ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n\t\t}\n\t\tif (isDate(value)) {\n\t\t\treturn ctx.stylize(Date.prototype.toString.call(value), 'date');\n\t\t}\n\t\tif (isError(value)) {\n\t\t\treturn formatError(value);\n\t\t}\n\t}\n\n\tvar base = '',\n\t\tarray = false,\n\t\tbraces = ['{', '}'];\n\n\t// Make Array say that they are Array\n\tif (isArray(value)) {\n\t\tarray = true;\n\t\tbraces = ['[', ']'];\n\t}\n\n\t// Make functions say that they are functions\n\tif (isFunction(value)) {\n\t\tvar n = value.name ? ': ' + value.name : '';\n\t\tbase = ' [Function' + n + ']';\n\t}\n\n\t// Make RegExps say that they are RegExps\n\tif (isRegExp(value)) {\n\t\tbase = ' ' + RegExp.prototype.toString.call(value);\n\t}\n\n\t// Make dates with properties first say the date\n\tif (isDate(value)) {\n\t\tbase = ' ' + Date.prototype.toUTCString.call(value);\n\t}\n\n\t// Make error with message first say the error\n\tif (isError(value)) {\n\t\tbase = ' ' + formatError(value);\n\t}\n\n\tif (keys.length === 0 && (!array || value.length == 0)) {\n\t\treturn braces[0] + base + braces[1];\n\t}\n\n\tif (recurseTimes < 0) {\n\t\tif (isRegExp(value)) {\n\t\t\treturn ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n\t\t} else {\n\t\t\treturn ctx.stylize('[Object]', 'special');\n\t\t}\n\t}\n\n\tctx.seen.push(value);\n\n\tvar output;\n\tif (array) {\n\t\toutput = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n\t} else {\n\t\toutput = keys.map(function (key) {\n\t\t\treturn formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n\t\t});\n\t}\n\n\tctx.seen.pop();\n\n\treturn reduceToSingleString(output, base, braces);\n}\n\nfunction formatPrimitive(ctx, value) {\n\tif (isUndefined(value)) return ctx.stylize('undefined', 'undefined');\n\tif (isString(value)) {\n\t\tvar simple = \"'\" + JSON.stringify(value).replace(/^\"|\"$/g, '').replace(/'/g, \"\\\\'\").replace(/\\\\\"/g, '\"') + \"'\";\n\t\treturn ctx.stylize(simple, 'string');\n\t}\n\tif (isNumber(value)) return ctx.stylize('' + value, 'number');\n\tif (isBoolean(value)) return ctx.stylize('' + value, 'boolean');\n\t// For some reason typeof null is \"object\", so special case here.\n\tif (isNull(value)) return ctx.stylize('null', 'null');\n}\n\nfunction formatError(value) {\n\treturn '[' + Error.prototype.toString.call(value) + ']';\n}\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n\tvar output = [];\n\tfor (var i = 0, l = value.length; i < l; ++i) {\n\t\tif (hasOwnProperty(value, String(i))) {\n\t\t\toutput.push(formatProperty(ctx, value, recurseTimes, visibleKeys, String(i), true));\n\t\t} else {\n\t\t\toutput.push('');\n\t\t}\n\t}\n\tkeys.forEach(function (key) {\n\t\tif (!key.match(/^\\d+$/)) {\n\t\t\toutput.push(formatProperty(ctx, value, recurseTimes, visibleKeys, key, true));\n\t\t}\n\t});\n\treturn output;\n}\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n\tvar name, str, desc;\n\tdesc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n\tif (desc.get) {\n\t\tif (desc.set) {\n\t\t\tstr = ctx.stylize('[Getter/Setter]', 'special');\n\t\t} else {\n\t\t\tstr = ctx.stylize('[Getter]', 'special');\n\t\t}\n\t} else {\n\t\tif (desc.set) {\n\t\t\tstr = ctx.stylize('[Setter]', 'special');\n\t\t}\n\t}\n\tif (!hasOwnProperty(visibleKeys, key)) {\n\t\tname = '[' + key + ']';\n\t}\n\tif (!str) {\n\t\tif (ctx.seen.indexOf(desc.value) < 0) {\n\t\t\tif (isNull(recurseTimes)) {\n\t\t\t\tstr = formatValue(ctx, desc.value, null);\n\t\t\t} else {\n\t\t\t\tstr = formatValue(ctx, desc.value, recurseTimes - 1);\n\t\t\t}\n\t\t\tif (str.indexOf('\\n') > -1) {\n\t\t\t\tif (array) {\n\t\t\t\t\tstr = str\n\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t.map(function (line) {\n\t\t\t\t\t\t\treturn '  ' + line;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join('\\n')\n\t\t\t\t\t\t.substr(2);\n\t\t\t\t} else {\n\t\t\t\t\tstr =\n\t\t\t\t\t\t'\\n' +\n\t\t\t\t\t\tstr\n\t\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t\t.map(function (line) {\n\t\t\t\t\t\t\t\treturn '   ' + line;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.join('\\n');\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tstr = ctx.stylize('[Circular]', 'special');\n\t\t}\n\t}\n\tif (isUndefined(name)) {\n\t\tif (array && key.match(/^\\d+$/)) {\n\t\t\treturn str;\n\t\t}\n\t\tname = JSON.stringify('' + key);\n\t\tif (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n\t\t\tname = name.substr(1, name.length - 2);\n\t\t\tname = ctx.stylize(name, 'name');\n\t\t} else {\n\t\t\tname = name\n\t\t\t\t.replace(/'/g, \"\\\\'\")\n\t\t\t\t.replace(/\\\\\"/g, '\"')\n\t\t\t\t.replace(/(^\"|\"$)/g, \"'\");\n\t\t\tname = ctx.stylize(name, 'string');\n\t\t}\n\t}\n\n\treturn name + ': ' + str;\n}\n\nfunction reduceToSingleString(output, base, braces) {\n\tvar numLinesEst = 0;\n\tvar length = output.reduce(function (prev, cur) {\n\t\tnumLinesEst++;\n\t\tif (cur.indexOf('\\n') >= 0) numLinesEst++;\n\t\treturn prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n\t}, 0);\n\n\tif (length > 60) {\n\t\treturn braces[0] + (base === '' ? '' : base + '\\n ') + ' ' + output.join(',\\n  ') + ' ' + braces[1];\n\t}\n\n\treturn braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nexport function isArray(ar) {\n\treturn Array.isArray(ar);\n}\n\nexport function isBoolean(arg) {\n\treturn typeof arg === 'boolean';\n}\n\nexport function isNull(arg) {\n\treturn arg === null;\n}\n\nexport function isNullOrUndefined(arg) {\n\treturn arg == null;\n}\n\nexport function isNumber(arg) {\n\treturn typeof arg === 'number';\n}\n\nexport function isString(arg) {\n\treturn typeof arg === 'string';\n}\n\nexport function isSymbol(arg) {\n\treturn typeof arg === 'symbol';\n}\n\nexport function isUndefined(arg) {\n\treturn arg === void 0;\n}\n\nexport function isRegExp(re) {\n\treturn isObject(re) && objectToString(re) === '[object RegExp]';\n}\n\nexport function isObject(arg) {\n\treturn typeof arg === 'object' && arg !== null;\n}\n\nexport function isDate(d) {\n\treturn isObject(d) && objectToString(d) === '[object Date]';\n}\n\nexport function isError(e) {\n\treturn isObject(e) && (objectToString(e) === '[object Error]' || e instanceof Error);\n}\n\nexport function isFunction(arg) {\n\treturn typeof arg === 'function';\n}\n\nexport function isPrimitive(arg) {\n\treturn (\n\t\targ === null ||\n\t\ttypeof arg === 'boolean' ||\n\t\ttypeof arg === 'number' ||\n\t\ttypeof arg === 'string' ||\n\t\ttypeof arg === 'symbol' || // ES6 symbol\n\t\ttypeof arg === 'undefined'\n\t);\n}\n\nexport function isBuffer(maybeBuf) {\n\treturn Buffer.isBuffer(maybeBuf);\n}\n\nfunction objectToString(o) {\n\treturn Object.prototype.toString.call(o);\n}\n\nfunction pad(n) {\n\treturn n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n\tvar d = new Date();\n\tvar time = [pad(d.getHours()), pad(d.getMinutes()), pad(d.getSeconds())].join(':');\n\treturn [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexport function log() {\n\tconsole.log('%s - %s', timestamp(), format.apply(null, arguments));\n}\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nimport inherits from './inherits';\nexport { inherits };\n\nexport function _extend(origin, add) {\n\t// Don't do anything if add isn't an object\n\tif (!add || !isObject(add)) return origin;\n\n\tvar keys = Object.keys(add);\n\tvar i = keys.length;\n\twhile (i--) {\n\t\torigin[keys[i]] = add[keys[i]];\n\t}\n\treturn origin;\n}\n\nfunction hasOwnProperty(obj, prop) {\n\treturn Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nexport default {\n\tinherits: inherits,\n\t_extend: _extend,\n\tlog: log,\n\tisBuffer: isBuffer,\n\tisPrimitive: isPrimitive,\n\tisFunction: isFunction,\n\tisError: isError,\n\tisDate: isDate,\n\tisObject: isObject,\n\tisRegExp: isRegExp,\n\tisUndefined: isUndefined,\n\tisSymbol: isSymbol,\n\tisString: isString,\n\tisNumber: isNumber,\n\tisNullOrUndefined: isNullOrUndefined,\n\tisNull: isNull,\n\tisBoolean: isBoolean,\n\tisArray: isArray,\n\tinspect: inspect,\n\tdeprecate: deprecate,\n\tformat: format,\n\tdebuglog: debuglog\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n\treturn Object.prototype.hasOwnProperty.call(obj, prop);\n}\nvar isArray =\n\tArray.isArray ||\n\tfunction (xs) {\n\t\treturn Object.prototype.toString.call(xs) === '[object Array]';\n\t};\nfunction stringifyPrimitive(v) {\n\tswitch (typeof v) {\n\t\tcase 'string':\n\t\t\treturn v;\n\n\t\tcase 'boolean':\n\t\t\treturn v ? 'true' : 'false';\n\n\t\tcase 'number':\n\t\t\treturn isFinite(v) ? v : '';\n\n\t\tdefault:\n\t\t\treturn '';\n\t}\n}\n\nexport function stringify(obj, sep, eq, name) {\n\tsep = sep || '&';\n\teq = eq || '=';\n\tif (obj === null) {\n\t\tobj = undefined;\n\t}\n\n\tif (typeof obj === 'object') {\n\t\treturn map(objectKeys(obj), function (k) {\n\t\t\tvar ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n\t\t\tif (isArray(obj[k])) {\n\t\t\t\treturn map(obj[k], function (v) {\n\t\t\t\t\treturn ks + encodeURIComponent(stringifyPrimitive(v));\n\t\t\t\t}).join(sep);\n\t\t\t} else {\n\t\t\t\treturn ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n\t\t\t}\n\t\t}).join(sep);\n\t}\n\n\tif (!name) return '';\n\treturn encodeURIComponent(stringifyPrimitive(name)) + eq + encodeURIComponent(stringifyPrimitive(obj));\n}\n\nfunction map(xs, f) {\n\tif (xs.map) return xs.map(f);\n\tvar res = [];\n\tfor (var i = 0; i < xs.length; i++) {\n\t\tres.push(f(xs[i], i));\n\t}\n\treturn res;\n}\n\nvar objectKeys =\n\tObject.keys ||\n\tfunction (obj) {\n\t\tvar res = [];\n\t\tfor (var key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n\t\t}\n\t\treturn res;\n\t};\n\nexport function parse(qs, sep, eq, options) {\n\tsep = sep || '&';\n\teq = eq || '=';\n\tvar obj = {};\n\n\tif (typeof qs !== 'string' || qs.length === 0) {\n\t\treturn obj;\n\t}\n\n\tvar regexp = /\\+/g;\n\tqs = qs.split(sep);\n\n\tvar maxKeys = 1000;\n\tif (options && typeof options.maxKeys === 'number') {\n\t\tmaxKeys = options.maxKeys;\n\t}\n\n\tvar len = qs.length;\n\t// maxKeys <= 0 means that we should not limit keys count\n\tif (maxKeys > 0 && len > maxKeys) {\n\t\tlen = maxKeys;\n\t}\n\n\tfor (var i = 0; i < len; ++i) {\n\t\tvar x = qs[i].replace(regexp, '%20'),\n\t\t\tidx = x.indexOf(eq),\n\t\t\tkstr,\n\t\t\tvstr,\n\t\t\tk,\n\t\t\tv;\n\n\t\tif (idx >= 0) {\n\t\t\tkstr = x.substr(0, idx);\n\t\t\tvstr = x.substr(idx + 1);\n\t\t} else {\n\t\t\tkstr = x;\n\t\t\tvstr = '';\n\t\t}\n\n\t\tk = decodeURIComponent(kstr);\n\t\tv = decodeURIComponent(vstr);\n\n\t\tif (!hasOwnProperty(obj, k)) {\n\t\t\tobj[k] = v;\n\t\t} else if (isArray(obj[k])) {\n\t\t\tobj[k].push(v);\n\t\t} else {\n\t\t\tobj[k] = [obj[k], v];\n\t\t}\n\t}\n\n\treturn obj;\n}\nexport default {\n\tencode: stringify,\n\tstringify: stringify,\n\tdecode: parse,\n\tparse: parse\n};\nexport { stringify as encode, parse as decode };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nimport { toASCII } from 'punycode';\nimport { isObject, isString, isNullOrUndefined, isNull } from 'util';\nimport { parse as qsParse, stringify as qsStringify } from 'querystring';\nexport { urlParse as parse, urlResolve as resolve, urlResolveObject as resolveObject, urlFormat as format };\nexport default {\n\tparse: urlParse,\n\tresolve: urlResolve,\n\tresolveObject: urlResolveObject,\n\tformat: urlFormat,\n\tUrl: Url,\n\tURL: URL\n};\nexport function Url() {\n\tthis.protocol = null;\n\tthis.slashes = null;\n\tthis.auth = null;\n\tthis.host = null;\n\tthis.port = null;\n\tthis.hostname = null;\n\tthis.hash = null;\n\tthis.search = null;\n\tthis.query = null;\n\tthis.pathname = null;\n\tthis.path = null;\n\tthis.href = null;\n}\n\n/**\n * Export Url as URL for TypeScript.\n *\n * In TypeScript the class is all uppercase.\n *\n * This will allow the following in TypeScript without problems:\n *\n * ```ts\n * import { URL } from 'url';\n * ```\n */\nexport const URL = Url;\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n\tportPattern = /:[0-9]*$/,\n\t// Special case for a simple path URL\n\tsimplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\t// RFC 2396: characters reserved for delimiting URLs.\n\t// We actually just auto-escape these.\n\tdelims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\t// RFC 2396: characters not allowed for various reasons.\n\tunwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\t// Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n\tautoEscape = [\"'\"].concat(unwise),\n\t// Characters that are never ever allowed in a hostname.\n\t// Note that any invalid chars are also handled, but these\n\t// are the ones that are *expected* to be seen, so we fast-path\n\t// them.\n\tnonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n\thostEndingChars = ['/', '?', '#'],\n\thostnameMaxLen = 255,\n\thostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n\thostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n\t// protocols that can allow \"unsafe\" and \"unwise\" chars.\n\tunsafeProtocol = {\n\t\tjavascript: true,\n\t\t'javascript:': true\n\t},\n\t// protocols that never have a hostname.\n\thostlessProtocol = {\n\t\tjavascript: true,\n\t\t'javascript:': true\n\t},\n\t// protocols that always contain a // bit.\n\tslashedProtocol = {\n\t\thttp: true,\n\t\thttps: true,\n\t\tftp: true,\n\t\tgopher: true,\n\t\tfile: true,\n\t\t'http:': true,\n\t\t'https:': true,\n\t\t'ftp:': true,\n\t\t'gopher:': true,\n\t\t'file:': true\n\t};\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n\tif (url && isObject(url) && url instanceof Url) return url;\n\n\tvar u = new Url();\n\tu.parse(url, parseQueryString, slashesDenoteHost);\n\treturn u;\n}\nUrl.prototype.parse = function (url, parseQueryString, slashesDenoteHost) {\n\treturn parse(this, url, parseQueryString, slashesDenoteHost);\n};\n\nfunction parse(self, url, parseQueryString, slashesDenoteHost) {\n\tif (!isString(url)) {\n\t\tthrow new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n\t}\n\n\t// Copy chrome, IE, opera backslash-handling behavior.\n\t// Back slashes before the query string get converted to forward slashes\n\t// See: https://code.google.com/p/chromium/issues/detail?id=25916\n\tvar queryIndex = url.indexOf('?'),\n\t\tsplitter = queryIndex !== -1 && queryIndex < url.indexOf('#') ? '?' : '#',\n\t\tuSplit = url.split(splitter),\n\t\tslashRegex = /\\\\/g;\n\tuSplit[0] = uSplit[0].replace(slashRegex, '/');\n\turl = uSplit.join(splitter);\n\n\tvar rest = url;\n\n\t// trim before proceeding.\n\t// This is to support parse stuff like \"  http://foo.com  \\n\"\n\trest = rest.trim();\n\n\tif (!slashesDenoteHost && url.split('#').length === 1) {\n\t\t// Try fast path regexp\n\t\tvar simplePath = simplePathPattern.exec(rest);\n\t\tif (simplePath) {\n\t\t\tself.path = rest;\n\t\t\tself.href = rest;\n\t\t\tself.pathname = simplePath[1];\n\t\t\tif (simplePath[2]) {\n\t\t\t\tself.search = simplePath[2];\n\t\t\t\tif (parseQueryString) {\n\t\t\t\t\tself.query = qsParse(self.search.substr(1));\n\t\t\t\t} else {\n\t\t\t\t\tself.query = self.search.substr(1);\n\t\t\t\t}\n\t\t\t} else if (parseQueryString) {\n\t\t\t\tself.search = '';\n\t\t\t\tself.query = {};\n\t\t\t}\n\t\t\treturn self;\n\t\t}\n\t}\n\n\tvar proto = protocolPattern.exec(rest);\n\tif (proto) {\n\t\tproto = proto[0];\n\t\tvar lowerProto = proto.toLowerCase();\n\t\tself.protocol = lowerProto;\n\t\trest = rest.substr(proto.length);\n\t}\n\n\t// figure out if it's got a host\n\t// user@server is *always* interpreted as a hostname, and url\n\t// resolution will treat //foo/bar as host=foo,path=bar because that's\n\t// how the browser resolves relative URLs.\n\tif (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n\t\tvar slashes = rest.substr(0, 2) === '//';\n\t\tif (slashes && !(proto && hostlessProtocol[proto])) {\n\t\t\trest = rest.substr(2);\n\t\t\tself.slashes = true;\n\t\t}\n\t}\n\tvar i, hec, l, p;\n\tif (!hostlessProtocol[proto] && (slashes || (proto && !slashedProtocol[proto]))) {\n\t\t// there's a hostname.\n\t\t// the first instance of /, ?, ;, or # ends the host.\n\t\t//\n\t\t// If there is an @ in the hostname, then non-host chars *are* allowed\n\t\t// to the left of the last @ sign, unless some host-ending character\n\t\t// comes *before* the @-sign.\n\t\t// URLs are obnoxious.\n\t\t//\n\t\t// ex:\n\t\t// http://a@b@c/ => user:a@b host:c\n\t\t// http://a@b?@c => user:a host:c path:/?@c\n\n\t\t// v0.12 TODO(isaacs): This is not quite how Chrome does things.\n\t\t// Review our test case against browsers more comprehensively.\n\n\t\t// find the first instance of any hostEndingChars\n\t\tvar hostEnd = -1;\n\t\tfor (i = 0; i < hostEndingChars.length; i++) {\n\t\t\thec = rest.indexOf(hostEndingChars[i]);\n\t\t\tif (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) hostEnd = hec;\n\t\t}\n\n\t\t// at this point, either we have an explicit point where the\n\t\t// auth portion cannot go past, or the last @ char is the decider.\n\t\tvar auth, atSign;\n\t\tif (hostEnd === -1) {\n\t\t\t// atSign can be anywhere.\n\t\t\tatSign = rest.lastIndexOf('@');\n\t\t} else {\n\t\t\t// atSign must be in auth portion.\n\t\t\t// http://a@b/c@d => host:b auth:a path:/c@d\n\t\t\tatSign = rest.lastIndexOf('@', hostEnd);\n\t\t}\n\n\t\t// Now we have a portion which is definitely the auth.\n\t\t// Pull that off.\n\t\tif (atSign !== -1) {\n\t\t\tauth = rest.slice(0, atSign);\n\t\t\trest = rest.slice(atSign + 1);\n\t\t\tself.auth = decodeURIComponent(auth);\n\t\t}\n\n\t\t// the host is the remaining to the left of the first non-host char\n\t\thostEnd = -1;\n\t\tfor (i = 0; i < nonHostChars.length; i++) {\n\t\t\thec = rest.indexOf(nonHostChars[i]);\n\t\t\tif (hec !== -1 && (hostEnd === -1 || hec < hostEnd)) hostEnd = hec;\n\t\t}\n\t\t// if we still have not hit it, then the entire thing is a host.\n\t\tif (hostEnd === -1) hostEnd = rest.length;\n\n\t\tself.host = rest.slice(0, hostEnd);\n\t\trest = rest.slice(hostEnd);\n\n\t\t// pull out port.\n\t\tparseHost(self);\n\n\t\t// we've indicated that there is a hostname,\n\t\t// so even if it's empty, it has to be present.\n\t\tself.hostname = self.hostname || '';\n\n\t\t// if hostname begins with [ and ends with ]\n\t\t// assume that it's an IPv6 address.\n\t\tvar ipv6Hostname = self.hostname[0] === '[' && self.hostname[self.hostname.length - 1] === ']';\n\n\t\t// validate a little.\n\t\tif (!ipv6Hostname) {\n\t\t\tvar hostparts = self.hostname.split(/\\./);\n\t\t\tfor (i = 0, l = hostparts.length; i < l; i++) {\n\t\t\t\tvar part = hostparts[i];\n\t\t\t\tif (!part) continue;\n\t\t\t\tif (!part.match(hostnamePartPattern)) {\n\t\t\t\t\tvar newpart = '';\n\t\t\t\t\tfor (var j = 0, k = part.length; j < k; j++) {\n\t\t\t\t\t\tif (part.charCodeAt(j) > 127) {\n\t\t\t\t\t\t\t// we replace non-ASCII char with a temporary placeholder\n\t\t\t\t\t\t\t// we need this to make sure size of hostname is not\n\t\t\t\t\t\t\t// broken by replacing non-ASCII by nothing\n\t\t\t\t\t\t\tnewpart += 'x';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewpart += part[j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// we test again with ASCII char only\n\t\t\t\t\tif (!newpart.match(hostnamePartPattern)) {\n\t\t\t\t\t\tvar validParts = hostparts.slice(0, i);\n\t\t\t\t\t\tvar notHost = hostparts.slice(i + 1);\n\t\t\t\t\t\tvar bit = part.match(hostnamePartStart);\n\t\t\t\t\t\tif (bit) {\n\t\t\t\t\t\t\tvalidParts.push(bit[1]);\n\t\t\t\t\t\t\tnotHost.unshift(bit[2]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (notHost.length) {\n\t\t\t\t\t\t\trest = '/' + notHost.join('.') + rest;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.hostname = validParts.join('.');\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (self.hostname.length > hostnameMaxLen) {\n\t\t\tself.hostname = '';\n\t\t} else {\n\t\t\t// hostnames are always lower case.\n\t\t\tself.hostname = self.hostname.toLowerCase();\n\t\t}\n\n\t\tif (!ipv6Hostname) {\n\t\t\t// IDNA Support: Returns a punycoded representation of \"domain\".\n\t\t\t// It only converts parts of the domain name that\n\t\t\t// have non-ASCII characters, i.e. it doesn't matter if\n\t\t\t// you call it with a domain that already is ASCII-only.\n\t\t\tself.hostname = toASCII(self.hostname);\n\t\t}\n\n\t\tp = self.port ? ':' + self.port : '';\n\t\tvar h = self.hostname || '';\n\t\tself.host = h + p;\n\t\tself.href += self.host;\n\n\t\t// strip [ and ] from the hostname\n\t\t// the host field still retains them, though\n\t\tif (ipv6Hostname) {\n\t\t\tself.hostname = self.hostname.substr(1, self.hostname.length - 2);\n\t\t\tif (rest[0] !== '/') {\n\t\t\t\trest = '/' + rest;\n\t\t\t}\n\t\t}\n\t}\n\n\t// now rest is set to the post-host stuff.\n\t// chop off any delim chars.\n\tif (!unsafeProtocol[lowerProto]) {\n\t\t// First, make 100% sure that any \"autoEscape\" chars get\n\t\t// escaped, even if encodeURIComponent doesn't think they\n\t\t// need to be.\n\t\tfor (i = 0, l = autoEscape.length; i < l; i++) {\n\t\t\tvar ae = autoEscape[i];\n\t\t\tif (rest.indexOf(ae) === -1) continue;\n\t\t\tvar esc = encodeURIComponent(ae);\n\t\t\tif (esc === ae) {\n\t\t\t\tesc = escape(ae);\n\t\t\t}\n\t\t\trest = rest.split(ae).join(esc);\n\t\t}\n\t}\n\n\t// chop off from the tail first.\n\tvar hash = rest.indexOf('#');\n\tif (hash !== -1) {\n\t\t// got a fragment string.\n\t\tself.hash = rest.substr(hash);\n\t\trest = rest.slice(0, hash);\n\t}\n\tvar qm = rest.indexOf('?');\n\tif (qm !== -1) {\n\t\tself.search = rest.substr(qm);\n\t\tself.query = rest.substr(qm + 1);\n\t\tif (parseQueryString) {\n\t\t\tself.query = qsParse(self.query);\n\t\t}\n\t\trest = rest.slice(0, qm);\n\t} else if (parseQueryString) {\n\t\t// no query string, but parseQueryString still requested\n\t\tself.search = '';\n\t\tself.query = {};\n\t}\n\tif (rest) self.pathname = rest;\n\tif (slashedProtocol[lowerProto] && self.hostname && !self.pathname) {\n\t\tself.pathname = '/';\n\t}\n\n\t//to support http.request\n\tif (self.pathname || self.search) {\n\t\tp = self.pathname || '';\n\t\tvar s = self.search || '';\n\t\tself.path = p + s;\n\t}\n\n\t// finally, reconstruct the href based on what has been validated.\n\tself.href = format(self);\n\treturn self;\n}\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n\t// ensure it's an object, and not a string url.\n\t// If it's an obj, this is a no-op.\n\t// this way, you can call url_format() on strings\n\t// to clean up potentially wonky urls.\n\tif (isString(obj)) obj = parse({}, obj);\n\treturn format(obj);\n}\n\nfunction format(self) {\n\tvar auth = self.auth || '';\n\tif (auth) {\n\t\tauth = encodeURIComponent(auth);\n\t\tauth = auth.replace(/%3A/i, ':');\n\t\tauth += '@';\n\t}\n\n\tvar protocol = self.protocol || '',\n\t\tpathname = self.pathname || '',\n\t\thash = self.hash || '',\n\t\thost = false,\n\t\tquery = '';\n\n\tif (self.host) {\n\t\thost = auth + self.host;\n\t} else if (self.hostname) {\n\t\thost = auth + (self.hostname.indexOf(':') === -1 ? self.hostname : '[' + this.hostname + ']');\n\t\tif (self.port) {\n\t\t\thost += ':' + self.port;\n\t\t}\n\t}\n\n\tif (self.query && isObject(self.query) && Object.keys(self.query).length) {\n\t\tquery = qsStringify(self.query);\n\t}\n\n\tvar search = self.search || (query && '?' + query) || '';\n\n\tif (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n\t// only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n\t// unless they had them to begin with.\n\tif (self.slashes || ((!protocol || slashedProtocol[protocol]) && host !== false)) {\n\t\thost = '//' + (host || '');\n\t\tif (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n\t} else if (!host) {\n\t\thost = '';\n\t}\n\n\tif (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n\tif (search && search.charAt(0) !== '?') search = '?' + search;\n\n\tpathname = pathname.replace(/[?#]/g, function (match) {\n\t\treturn encodeURIComponent(match);\n\t});\n\tsearch = search.replace('#', '%23');\n\n\treturn protocol + host + pathname + search + hash;\n}\n\nUrl.prototype.format = function () {\n\treturn format(this);\n};\n\nfunction urlResolve(source, relative) {\n\treturn urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function (relative) {\n\treturn this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n\tif (!source) return relative;\n\treturn urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function (relative) {\n\tif (isString(relative)) {\n\t\tvar rel = new Url();\n\t\trel.parse(relative, false, true);\n\t\trelative = rel;\n\t}\n\n\tvar result = new Url();\n\tvar tkeys = Object.keys(this);\n\tfor (var tk = 0; tk < tkeys.length; tk++) {\n\t\tvar tkey = tkeys[tk];\n\t\tresult[tkey] = this[tkey];\n\t}\n\n\t// hash is always overridden, no matter what.\n\t// even href=\"\" will remove it.\n\tresult.hash = relative.hash;\n\n\t// if the relative url is empty, then there's nothing left to do here.\n\tif (relative.href === '') {\n\t\tresult.href = result.format();\n\t\treturn result;\n\t}\n\n\t// hrefs like //foo/bar always cut to the protocol.\n\tif (relative.slashes && !relative.protocol) {\n\t\t// take everything except the protocol from relative\n\t\tvar rkeys = Object.keys(relative);\n\t\tfor (var rk = 0; rk < rkeys.length; rk++) {\n\t\t\tvar rkey = rkeys[rk];\n\t\t\tif (rkey !== 'protocol') result[rkey] = relative[rkey];\n\t\t}\n\n\t\t//urlParse appends trailing / to urls like http://www.example.com\n\t\tif (slashedProtocol[result.protocol] && result.hostname && !result.pathname) {\n\t\t\tresult.path = result.pathname = '/';\n\t\t}\n\n\t\tresult.href = result.format();\n\t\treturn result;\n\t}\n\tvar relPath;\n\tif (relative.protocol && relative.protocol !== result.protocol) {\n\t\t// if it's a known url protocol, then changing\n\t\t// the protocol does weird things\n\t\t// first, if it's not file:, then we MUST have a host,\n\t\t// and if there was a path\n\t\t// to begin with, then we MUST have a path.\n\t\t// if it is file:, then the host is dropped,\n\t\t// because that's known to be hostless.\n\t\t// anything else is assumed to be absolute.\n\t\tif (!slashedProtocol[relative.protocol]) {\n\t\t\tvar keys = Object.keys(relative);\n\t\t\tfor (var v = 0; v < keys.length; v++) {\n\t\t\t\tvar k = keys[v];\n\t\t\t\tresult[k] = relative[k];\n\t\t\t}\n\t\t\tresult.href = result.format();\n\t\t\treturn result;\n\t\t}\n\n\t\tresult.protocol = relative.protocol;\n\t\tif (!relative.host && !hostlessProtocol[relative.protocol]) {\n\t\t\trelPath = (relative.pathname || '').split('/');\n\t\t\twhile (relPath.length && !(relative.host = relPath.shift()));\n\t\t\tif (!relative.host) relative.host = '';\n\t\t\tif (!relative.hostname) relative.hostname = '';\n\t\t\tif (relPath[0] !== '') relPath.unshift('');\n\t\t\tif (relPath.length < 2) relPath.unshift('');\n\t\t\tresult.pathname = relPath.join('/');\n\t\t} else {\n\t\t\tresult.pathname = relative.pathname;\n\t\t}\n\t\tresult.search = relative.search;\n\t\tresult.query = relative.query;\n\t\tresult.host = relative.host || '';\n\t\tresult.auth = relative.auth;\n\t\tresult.hostname = relative.hostname || relative.host;\n\t\tresult.port = relative.port;\n\t\t// to support http.request\n\t\tif (result.pathname || result.search) {\n\t\t\tvar p = result.pathname || '';\n\t\t\tvar s = result.search || '';\n\t\t\tresult.path = p + s;\n\t\t}\n\t\tresult.slashes = result.slashes || relative.slashes;\n\t\tresult.href = result.format();\n\t\treturn result;\n\t}\n\n\tvar isSourceAbs = result.pathname && result.pathname.charAt(0) === '/',\n\t\tisRelAbs = relative.host || (relative.pathname && relative.pathname.charAt(0) === '/'),\n\t\tmustEndAbs = isRelAbs || isSourceAbs || (result.host && relative.pathname),\n\t\tremoveAllDots = mustEndAbs,\n\t\tsrcPath = (result.pathname && result.pathname.split('/')) || [],\n\t\tpsychotic = result.protocol && !slashedProtocol[result.protocol];\n\trelPath = (relative.pathname && relative.pathname.split('/')) || [];\n\t// if the url is a non-slashed url, then relative\n\t// links like ../.. should be able\n\t// to crawl up to the hostname, as well.  This is strange.\n\t// result.protocol has already been set by now.\n\t// Later on, put the first path part into the host field.\n\tif (psychotic) {\n\t\tresult.hostname = '';\n\t\tresult.port = null;\n\t\tif (result.host) {\n\t\t\tif (srcPath[0] === '') srcPath[0] = result.host;\n\t\t\telse srcPath.unshift(result.host);\n\t\t}\n\t\tresult.host = '';\n\t\tif (relative.protocol) {\n\t\t\trelative.hostname = null;\n\t\t\trelative.port = null;\n\t\t\tif (relative.host) {\n\t\t\t\tif (relPath[0] === '') relPath[0] = relative.host;\n\t\t\t\telse relPath.unshift(relative.host);\n\t\t\t}\n\t\t\trelative.host = null;\n\t\t}\n\t\tmustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n\t}\n\tvar authInHost;\n\tif (isRelAbs) {\n\t\t// it's absolute.\n\t\tresult.host = relative.host || relative.host === '' ? relative.host : result.host;\n\t\tresult.hostname = relative.hostname || relative.hostname === '' ? relative.hostname : result.hostname;\n\t\tresult.search = relative.search;\n\t\tresult.query = relative.query;\n\t\tsrcPath = relPath;\n\t\t// fall through to the dot-handling below.\n\t} else if (relPath.length) {\n\t\t// it's relative\n\t\t// throw away the existing file, and take the new path instead.\n\t\tif (!srcPath) srcPath = [];\n\t\tsrcPath.pop();\n\t\tsrcPath = srcPath.concat(relPath);\n\t\tresult.search = relative.search;\n\t\tresult.query = relative.query;\n\t} else if (!isNullOrUndefined(relative.search)) {\n\t\t// just pull out the search.\n\t\t// like href='?foo'.\n\t\t// Put this after the other two cases because it simplifies the booleans\n\t\tif (psychotic) {\n\t\t\tresult.hostname = result.host = srcPath.shift();\n\t\t\t//occationaly the auth can get stuck only in host\n\t\t\t//this especially happens in cases like\n\t\t\t//url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n\t\t\tauthInHost = result.host && result.host.indexOf('@') > 0 ? result.host.split('@') : false;\n\t\t\tif (authInHost) {\n\t\t\t\tresult.auth = authInHost.shift();\n\t\t\t\tresult.host = result.hostname = authInHost.shift();\n\t\t\t}\n\t\t}\n\t\tresult.search = relative.search;\n\t\tresult.query = relative.query;\n\t\t//to support http.request\n\t\tif (!isNull(result.pathname) || !isNull(result.search)) {\n\t\t\tresult.path = (result.pathname ? result.pathname : '') + (result.search ? result.search : '');\n\t\t}\n\t\tresult.href = result.format();\n\t\treturn result;\n\t}\n\n\tif (!srcPath.length) {\n\t\t// no path at all.  easy.\n\t\t// we've already handled the other stuff above.\n\t\tresult.pathname = null;\n\t\t//to support http.request\n\t\tif (result.search) {\n\t\t\tresult.path = '/' + result.search;\n\t\t} else {\n\t\t\tresult.path = null;\n\t\t}\n\t\tresult.href = result.format();\n\t\treturn result;\n\t}\n\n\t// if a url ENDs in . or .., then it must get a trailing slash.\n\t// however, if it ends in anything else non-slashy,\n\t// then it must NOT get a trailing slash.\n\tvar last = srcPath.slice(-1)[0];\n\tvar hasTrailingSlash = ((result.host || relative.host || srcPath.length > 1) && (last === '.' || last === '..')) || last === '';\n\n\t// strip single dots, resolve double dots to parent dir\n\t// if the path tries to go above the root, `up` ends up > 0\n\tvar up = 0;\n\tfor (var i = srcPath.length; i >= 0; i--) {\n\t\tlast = srcPath[i];\n\t\tif (last === '.') {\n\t\t\tsrcPath.splice(i, 1);\n\t\t} else if (last === '..') {\n\t\t\tsrcPath.splice(i, 1);\n\t\t\tup++;\n\t\t} else if (up) {\n\t\t\tsrcPath.splice(i, 1);\n\t\t\tup--;\n\t\t}\n\t}\n\n\t// if the path is allowed to go above the root, restore leading ..s\n\tif (!mustEndAbs && !removeAllDots) {\n\t\tfor (; up--; up) {\n\t\t\tsrcPath.unshift('..');\n\t\t}\n\t}\n\n\tif (mustEndAbs && srcPath[0] !== '' && (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n\t\tsrcPath.unshift('');\n\t}\n\n\tif (hasTrailingSlash && srcPath.join('/').substr(-1) !== '/') {\n\t\tsrcPath.push('');\n\t}\n\n\tvar isAbsolute = srcPath[0] === '' || (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n\t// put the host back\n\tif (psychotic) {\n\t\tresult.hostname = result.host = isAbsolute ? '' : srcPath.length ? srcPath.shift() : '';\n\t\t//occationaly the auth can get stuck only in host\n\t\t//this especially happens in cases like\n\t\t//url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n\t\tauthInHost = result.host && result.host.indexOf('@') > 0 ? result.host.split('@') : false;\n\t\tif (authInHost) {\n\t\t\tresult.auth = authInHost.shift();\n\t\t\tresult.host = result.hostname = authInHost.shift();\n\t\t}\n\t}\n\n\tmustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n\tif (mustEndAbs && !isAbsolute) {\n\t\tsrcPath.unshift('');\n\t}\n\n\tif (!srcPath.length) {\n\t\tresult.pathname = null;\n\t\tresult.path = null;\n\t} else {\n\t\tresult.pathname = srcPath.join('/');\n\t}\n\n\t//to support request.http\n\tif (!isNull(result.pathname) || !isNull(result.search)) {\n\t\tresult.path = (result.pathname ? result.pathname : '') + (result.search ? result.search : '');\n\t}\n\tresult.auth = relative.auth || result.auth;\n\tresult.slashes = result.slashes || relative.slashes;\n\tresult.href = result.format();\n\treturn result;\n};\n\nUrl.prototype.parseHost = function () {\n\treturn parseHost(this);\n};\n\nfunction parseHost(self) {\n\tvar host = self.host;\n\tvar port = portPattern.exec(host);\n\tif (port) {\n\t\tport = port[0];\n\t\tif (port !== ':') {\n\t\t\tself.port = port.substr(1);\n\t\t}\n\t\thost = host.substr(0, host.length - port.length);\n\t}\n\tif (host) self.hostname = host;\n}\n","// eslint-disable-next-line @typescript-eslint/naming-convention\nconst REGEXPESC = /[-/\\\\^$*+?.()|[\\]{}]/g;\n\n/**\n * Cleans a string from regex injection\n * @param str The string to clean\n */\nexport function regExpEsc(str: string): string {\n\treturn str.replace(REGEXPESC, '\\\\$&');\n}\n","// eslint-disable-next-line @typescript-eslint/naming-convention\nconst TOTITLECASE = /[A-Za-z√Ä-√ñ√ò-√∂√∏-√ø]\\S*/g;\nconst titleCaseVariants: Record<string, string> = {\n\ttextchannel: 'TextChannel',\n\tvoicechannel: 'VoiceChannel',\n\tcategorychannel: 'CategoryChannel',\n\tguildmember: 'GuildMember'\n};\n\n/**\n * Converts a string to Title Case\n * @description This is designed to also ensure common Discord PascalCased strings\n * \t\t\t\tare put in their TitleCase titleCaseVariants. See below for the full list.\n * @param str The string to title case\n * @terms\n * This table lists how certain terms are converted, these are case insensitive.\n * Any terms not included are converted to regular Titlecase.\n *\n *      | Term            |    Converted To |\n *      |-----------------|-----------------|\n *      | textchannel     |     TextChannel |\n *      | voicechannel    |    VoiceChannel |\n *      | categorychannel | CategoryChannel |\n *      | guildmember     |     GuildMember |\n */\nexport function toTitleCase(str: string): string {\n\treturn str.replace(TOTITLECASE, (txt) => titleCaseVariants[txt] || txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());\n}\n","/**\n * Compare if both arrays are strictly equal\n * @param arr1 The array to compare to\n * @param arr2 The array to compare with\n */\nexport function arrayStrictEquals<T extends readonly unknown[]>(arr1: T, arr2: T): boolean {\n\tif (arr1 === arr2) return true;\n\tif (arr1.length !== arr2.length) return false;\n\n\tfor (let i = 0; i < arr1.length; i++) {\n\t\tif (arr1[i] !== arr2[i] || typeof arr1[i] !== typeof arr2[i]) return false;\n\t}\n\treturn true;\n}\n","/**\n * Splits up an array into chunks\n * @param array The array to chunk up\n * @param chunkSize The size of each individual chunk\n */\nexport function chunk<T>(array: readonly T[], chunkSize: number): T[][] {\n\tif (!Array.isArray(array)) throw new TypeError('entries must be an array.');\n\tif (!Number.isInteger(chunkSize)) throw new TypeError('chunkSize must be an integer.');\n\tif (chunkSize < 1) throw new RangeError('chunkSize must be 1 or greater.');\n\tconst clone: T[] = array.slice();\n\tconst chunks: T[][] = [];\n\twhile (clone.length) chunks.push(clone.splice(0, chunkSize));\n\treturn chunks;\n}\n","import type { Ctor } from './utilityTypes';\n\n/**\n * Checks whether or not the value class extends the base class.\n * @param value The constructor to be checked against.\n * @param base The base constructor.\n */\nexport function classExtends<T extends Ctor>(value: Ctor, base: T): value is T {\n\tlet ctor: Ctor | null = value;\n\twhile (ctor !== null) {\n\t\tif (ctor === base) return true;\n\t\tctor = Object.getPrototypeOf(ctor);\n\t}\n\n\treturn false;\n}\n","import { splitText } from './splitText';\n\n/**\n * Split a text by its latest space character in a range from the character 0 to the selected one.\n * @param str The text to split.\n * @param length The length of the desired string.\n * @copyright 2019 Antonio Rom√°n\n * @license Apache-2.0\n */\nexport function cutText(str: string, length: number) {\n\tif (str.length < length) return str;\n\tconst cut = splitText(str, length - 3);\n\tif (cut.length < length - 3) return `${cut}...`;\n\treturn `${cut.slice(0, length - 3)}...`;\n}\n","/* eslint-disable @typescript-eslint/init-declarations */\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\nexport interface DebounceSettings {\n\t/**\n\t * The number of milliseconds to delay.\n\t * @default 0\n\t */\n\twait?: number;\n\n\t/**\n\t * The maximum time `func` is allowed to be delayed before it's invoked\n\t * @default null\n\t */\n\tmaxWait?: number | null;\n}\n\nexport interface DebouncedFunc<FnArgumentsType extends any[], FnReturnType> {\n\t/**\n\t * Call the original function, but applying the debounce rules.\n\t *\n\t * If the debounced function can be run immediately, this calls it and returns its return\n\t * value.\n\t *\n\t * Otherwise, it returns the return value of the last invokation, or undefined if the debounced\n\t * function was not invoked yet.\n\t */\n\t(...args: FnArgumentsType): FnReturnType | undefined;\n\n\t/**\n\t * Throw away any pending invokation of the debounced function.\n\t */\n\tcancel(): void;\n\n\t/**\n\t * If there is a pending invokation of the debounced function, invoke it immediately and return\n\t * its return value.\n\t *\n\t * Otherwise, return the value from the last invokation, or undefined if the debounced function\n\t * was never invoked.\n\t */\n\tflush(): FnReturnType | undefined;\n}\n\n/**\n * Creates a debounced function that delays invoking func until after wait milliseconds have elapsed since\n * the last time the debounced function was invoked. The debounced function comes with a cancel method to\n * cancel delayed invocations and a flush method to immediately invoke them. Provide an options object to\n * indicate that func should be invoked on the leading and/or trailing edge of the wait timeout. Subsequent\n * calls to the debounced function return the result of the last func invocation.\n *\n * Note: If leading and trailing options are true, func is invoked on the trailing edge of the timeout only\n * if the the debounced function is invoked more than once during the wait timeout.\n *\n * See David Corbacho‚Äôs article for details over the differences between _.debounce and _.throttle.\n *\n * @param func The function to debounce.\n * @param wait The number of milliseconds to delay.\n * @param options The options object.\n * @return Returns the new debounced function.\n */\nexport function debounce<FnArgumentsType extends any[], FnReturnType>(\n\tfunc: (...args: FnArgumentsType) => FnReturnType,\n\toptions: DebounceSettings = {}\n): DebouncedFunc<FnArgumentsType, FnReturnType> {\n\tlet lastArgs: FnArgumentsType | undefined;\n\tlet result: FnReturnType | undefined;\n\tlet timerId: NodeJS.Timeout | undefined;\n\tlet lastCallTime: number | undefined;\n\tlet lastInvokeTime = 0;\n\n\tconst wait = options.wait ?? 0;\n\tconst maxWait = typeof options.maxWait === 'number' ? Math.max(options.maxWait, wait) : null;\n\n\tfunction invokeFunc(time: number) {\n\t\tconst args = lastArgs;\n\n\t\tlastArgs = undefined;\n\t\tlastInvokeTime = time;\n\t\tresult = func(...args!);\n\t\treturn result;\n\t}\n\n\tfunction leadingEdge(time: number) {\n\t\t// Reset any `maxWait` timer.\n\t\tlastInvokeTime = time;\n\t\t// Start the timer for the trailing edge.\n\t\ttimerId = setTimeout(timerExpired, wait);\n\t\t// Invoke the leading edge.\n\t\treturn result;\n\t}\n\n\tfunction remainingWait(time: number) {\n\t\tconst timeSinceLastCall = time - lastCallTime!;\n\t\tconst timeSinceLastInvoke = time - lastInvokeTime;\n\t\tconst result = wait - timeSinceLastCall;\n\n\t\treturn maxWait === null ? result : Math.min(result, maxWait - timeSinceLastInvoke);\n\t}\n\n\tfunction shouldInvoke(time: number) {\n\t\tconst timeSinceLastCall = time - lastCallTime!;\n\t\tconst timeSinceLastInvoke = time - lastInvokeTime;\n\n\t\t// Either this is the first call, activity has stopped and we're at the\n\t\t// trailing edge, the system time has gone backwards and we're treating\n\t\t// it as the trailing edge, or we've hit the `maxWait` limit.\n\t\treturn (\n\t\t\tlastCallTime === undefined || //\n\t\t\ttimeSinceLastCall >= wait ||\n\t\t\ttimeSinceLastCall < 0 ||\n\t\t\t(maxWait !== null && timeSinceLastInvoke >= maxWait)\n\t\t);\n\t}\n\n\tfunction timerExpired() {\n\t\tconst time = Date.now();\n\t\tif (shouldInvoke(time)) {\n\t\t\ttrailingEdge(time);\n\t\t\treturn;\n\t\t}\n\t\t// Restart the timer.\n\t\ttimerId = setTimeout(timerExpired, remainingWait(time));\n\t}\n\n\tfunction trailingEdge(time: number) {\n\t\ttimerId = undefined;\n\t\treturn invokeFunc(time);\n\t}\n\n\tfunction cancel() {\n\t\tif (timerId !== undefined) {\n\t\t\tclearTimeout(timerId);\n\t\t}\n\n\t\tlastInvokeTime = 0;\n\t\tlastArgs = undefined;\n\t\tlastCallTime = undefined;\n\t\ttimerId = undefined;\n\t}\n\n\tfunction flush() {\n\t\treturn timerId === undefined ? result : trailingEdge(Date.now());\n\t}\n\n\tfunction debounced(...args: FnArgumentsType) {\n\t\tconst time = Date.now();\n\t\tconst isInvoking = shouldInvoke(time);\n\n\t\tlastArgs = args;\n\t\tlastCallTime = time;\n\n\t\tif (isInvoking) {\n\t\t\tif (timerId === undefined) {\n\t\t\t\treturn leadingEdge(lastCallTime);\n\t\t\t}\n\t\t\tif (maxWait !== null) {\n\t\t\t\t// Handle invocations in a tight loop.\n\t\t\t\ttimerId = setTimeout(timerExpired, wait);\n\t\t\t\treturn invokeFunc(lastCallTime);\n\t\t\t}\n\t\t}\n\n\t\tif (timerId === undefined) {\n\t\t\ttimerId = setTimeout(timerExpired, wait);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tdebounced.cancel = cancel;\n\tdebounced.flush = flush;\n\n\treturn debounced;\n}\n","import type { Ctor } from './utilityTypes';\n\n/**\n * Verify if the input is a class constructor.\n * @param input The function to verify\n */\nexport function isClass(input: unknown): input is Ctor {\n\treturn typeof input === 'function' && typeof input.prototype === 'object';\n}\n","/**\n * Verify if a number is a finite number.\n * @param input The number to verify\n */\nexport function isNumber(input: unknown): input is number {\n\treturn typeof input === 'number' && !isNaN(input) && Number.isFinite(input);\n}\n","/* eslint-disable @typescript-eslint/ban-types */\nimport { isFunction } from './isFunction';\n\nexport interface Thenable {\n\tthen: Function;\n\tcatch: Function;\n}\n\nfunction hasThen(input: { then?: Function }): boolean {\n\treturn Reflect.has(input, 'then') && isFunction(input.then);\n}\n\nfunction hasCatch(input: { catch?: Function }): boolean {\n\treturn Reflect.has(input, 'catch') && isFunction(input.catch);\n}\n\n/**\n * Verify if an object is a promise.\n * @param input The promise to verify\n */\nexport function isThenable(input: unknown): input is Thenable {\n\tif (typeof input !== 'object' || input === null) return false;\n\treturn input instanceof Promise || (input !== Promise.prototype && hasThen(input) && hasCatch(input));\n}\n","/**\n * Turn a dotted path into a json object.\n * @param path The dotted path\n * @param value The value\n * @param obj The object to edit\n */\nexport function makeObject(path: string, value: unknown, obj: Record<string, unknown> = {}): Record<string, unknown> {\n\tif (path.includes('.')) {\n\t\tconst route = path.split('.');\n\t\tconst lastKey = route.pop() as string;\n\t\tlet reference = obj;\n\t\tfor (const key of route) {\n\t\t\tif (!reference[key]) reference[key] = {};\n\t\t\treference = reference[key] as Record<string, unknown>;\n\t\t}\n\t\treference[lastKey] = value;\n\t} else {\n\t\tobj[path] = value;\n\t}\n\treturn obj;\n}\n","import { deepClone } from './deepClone';\nimport { isObject } from './isObject';\nimport type { DeepRequired } from './utilityTypes';\n\n// eslint-disable-next-line @typescript-eslint/consistent-type-definitions, @typescript-eslint/ban-types\ntype NonNullObject = {};\n\n/**\n * Deep merges 2 objects. Properties from the second parameter are applied to the first.\n * @remark `overwrites` is also mutated!\n * @remark If the value of a key in `overwrites` is `undefined` then the value of that same key in `base` is used instead!\n * @remark This is essentially `{ ...base, ...overwrites }` but recursively\n * @param base Base object\n * @param overwrites Overwrites to apply\n * @example\n * ```ts\n * const base = { a: 0, b: 1 };\n * const overwrites = {}; // will be { a: 0, b: 1 } after merge\n * mergeDefault(base, overwrites) // { a: 0, b: 1 }\n * ```\n * @example\n * ```ts\n * const base = { a: 0, b: 1 };\n * const overwrites = { a: 2, i: 3 };\n * mergeDefault(base, overwrites) // { a: 2, i: 3, b: 1 };\n * ```\n * @example\n * ```ts\n * const base = { a: 0, b: 1 };\n * const overwrites = { a: null };\n * mergeDefault(base, overwrites) // { a: null, b: 1 };\n * ```\n * @example\n * ```ts\n * const base = { a: 0, b: 1 };\n * const overwrites = { a: undefined };\n * mergeDefault(base, overwrites) // { a: 0, b: 1 };\n * ```\n * @example\n * ```ts\n * const base = { a: null };\n * const overwrites = { a: { b: 5 } };\n * mergeDefault(base, overwrites) // { a: { b: 5 } };\n * ```\n */\nexport function mergeDefault<A extends NonNullObject, B extends Partial<A>>(base: A, overwrites?: B): DeepRequired<A & B> {\n\t// If no overwrites are specified then deep clone the base\n\tif (!overwrites) return deepClone(base) as DeepRequired<A & B>;\n\n\tfor (const [baseKey, baseValue] of Object.entries(base)) {\n\t\tconst overwritesValueAtBaseKey = Reflect.get(overwrites, baseKey);\n\n\t\tif (typeof overwritesValueAtBaseKey === 'undefined') {\n\t\t\tReflect.set(overwrites, baseKey, deepClone(baseValue));\n\t\t} else if (isObject(overwritesValueAtBaseKey)) {\n\t\t\tReflect.set(overwrites, baseKey, mergeDefault((baseValue ?? {}) as NonNullObject, overwritesValueAtBaseKey));\n\t\t}\n\t}\n\n\treturn overwrites as DeepRequired<A & B>;\n}\n","/* eslint-disable @typescript-eslint/ban-types */\nimport { isObject } from './isObject';\n\n/**\n * Merges two objects\n * @param objTarget The object to be merged\n * @param objSource The object to merge\n */\nexport function mergeObjects<A extends object, B extends object>(objTarget: A, objSource: Readonly<B>): A & B {\n\tfor (const [key, value] of Object.entries(objSource)) {\n\t\tconst targetValue = Reflect.get(objTarget, key);\n\t\tif (isObject(value)) {\n\t\t\tReflect.set(objTarget, key, isObject(targetValue) ? mergeObjects(targetValue, value as object) : value);\n\t\t} else if (!isObject(targetValue)) {\n\t\t\tReflect.set(objTarget, key, value);\n\t\t}\n\t}\n\n\treturn objTarget as A & B;\n}\n","// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop() {}\n","import { isObject } from './isObject';\n\n/**\n * Convert an object to a tuple\n * @param value The object to convert\n * @param prefix The prefix for the key\n */\nexport function objectToTuples(original: Record<string, unknown>, prefix = ''): [string, unknown][] {\n\tconst entries: [string, unknown][] = [];\n\tfor (const [key, value] of Object.entries(original)) {\n\t\tif (isObject(value)) {\n\t\t\tentries.push(...objectToTuples(value as Record<string, unknown>, `${prefix}${key}.`));\n\t\t} else {\n\t\t\tentries.push([`${prefix}${key}`, value]);\n\t\t}\n\t}\n\n\treturn entries;\n}\n","import { URL } from 'url';\n\n/**\n * Parses an URL, returns null if invalid.\n * @param url The url to parse\n */\nexport function parseURL(url: string): URL | null {\n\ttry {\n\t\treturn new URL(url);\n\t} catch {\n\t\treturn null;\n\t}\n}\n","/**\n * Get an array of numbers with the selected range\n * @param min The minimum value\n * @param max The maximum value\n * @param step The step value\n */\nexport function range(min: number, max: number, step: number): number[] {\n\treturn new Array(Math.floor((max - min) / step) + 1).fill(0).map((_val, i) => min + i * step);\n}\n","/**\n * Properly rounds up or down a number.\n * Also supports strings using an exponent to indicate large or small numbers.\n * @param num The number to round off\n * @param scale The amount of decimals to retain\n */\nexport function roundNumber(num: number | string, scale = 0) {\n\tif (!num.toString().includes('e')) {\n\t\treturn Number(`${Math.round(Number(`${num}e+${scale}`))}e-${scale}`);\n\t}\n\tconst arr = `${num}`.split('e');\n\tlet sig = '';\n\n\tif (Number(arr[1]) + scale > 0) {\n\t\tsig = '+';\n\t}\n\n\treturn Number(`${Math.round(Number(`${Number(arr[0])}e${sig}${Number(arr[1]) + scale}`))}e-${scale}`);\n}\n","/* eslint-disable @typescript-eslint/ban-types */\n/**\n * Try parse a stringified JSON string.\n * @param value The value to parse\n */\nexport function tryParse(value: string): object | string {\n\ttry {\n\t\treturn JSON.parse(value);\n\t} catch (err) {\n\t\treturn value;\n\t}\n}\n"],"names":["zws","String","fromCharCode","splitText","str","length","char","x","substring","lastIndexOf","pos","isObject","input","constructor","Object","primitiveTypes","isPrimitive","includes","deepClone","source","Array","isArray","output","value","push","key","entries","Map","set","Set","values","add","isFunction","isNullOrUndefined","maxInt","regexNonASCII","regexSeparators","errors","overflow","not-basic","invalid-input","floor","Math","stringFromCharCode","error","type","RangeError","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","base","toASCII","mapDomain","string","fn","parts","split","result","encoded","map","array","replace","join","test","encode","n","handledCPCount","basicLength","bias","j","m","q","t","currentValue","inputLength","handledCPCountPlusOne","baseMinusT","qMinusT","ucs2decode","extra","counter","charCodeAt","isNull","arg","isString","hasOwnProperty","obj","prop","prototype","call","xs","toString","stringifyPrimitive","v","isFinite","f","res","i","objectKeys","keys","parse","qs","sep","eq","options","regexp","maxKeys","len","kstr","vstr","idx","indexOf","substr","decodeURIComponent","Url","this","protocol","slashes","auth","host","port","hostname","hash","search","query","pathname","path","href","URL","protocolPattern","portPattern","simplePathPattern","unwise","concat","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","javascript:","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","file","http:","https:","ftp:","gopher:","file:","format","self","encodeURIComponent","stringify","name","undefined","ks","qsStringify","charAt","match","parseHost","exec","url","parseQueryString","slashesDenoteHost","TypeError","queryIndex","splitter","uSplit","slashRegex","rest","trim","simplePath","qsParse","hec","l","p","proto","lowerProto","toLowerCase","atSign","hostEnd","slice","ipv6Hostname","hostparts","part","newpart","validParts","notHost","bit","unshift","h","ae","esc","escape","qm","s","resolve","relative","resolveObject","urlParse","u","rel","relPath","tkeys","tk","tkey","rkeys","rk","rkey","shift","authInHost","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","pop","last","hasTrailingSlash","up","splice","isAbsolute","REGEXPESC","TOTITLECASE","titleCaseVariants","textchannel","voicechannel","categorychannel","guildmember","arrayStrictEquals","arr1","arr2","chunk","chunkSize","Number","isInteger","clone","chunks","classExtends","ctor","getPrototypeOf","codeBlock","language","expression","cutText","cut","debounce","func","lastArgs","timerId","lastCallTime","lastInvokeTime","wait","maxWait","max","invokeFunc","time","args","shouldInvoke","timeSinceLastCall","timerExpired","Date","now","trailingEdge","setTimeout","remainingWait","timeSinceLastInvoke","min","debounced","isInvoking","leadingEdge","cancel","clearTimeout","flush","inlineCodeBlock","isClass","isNumber","isNaN","isThenable","Promise","hasThen","Reflect","has","then","hasCatch","catch","makeObject","route","lastKey","reference","mergeDefault","overwrites","baseKey","baseValue","overwritesValueAtBaseKey","get","mergeObjects","objTarget","objSource","targetValue","noop","objectToTuples","original","prefix","parseURL","range","step","fill","_val","regExpEsc","roundNumber","num","scale","round","arr","sig","toTitleCase","txt","toUpperCase","tryParse","JSON","err"],"mappings":"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"}