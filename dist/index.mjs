export*from"@sapphire/discord-utilities";function isCategoryChannel(e){return"category"===e.type}function isDMChannel(e){return"dm"===e.type}function isGroupChannel(e){return"group"===e.type}function isGuildBasedChannel(e){return"dm"!==e.type&&"group"!==e.type&&"unknown"!==e.type}function isNewsChannel(e){return"news"===e.type}function isStoreChannel(e){return"store"===e.type}function isTextChannel(e){return"text"===e.type}function isVoiceChannel(e){return"voice"===e.type}class PaginatedMessage{constructor({pages:e,actions:s=PaginatedMessage.defaultActions}={}){Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"collector",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"actions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:2e4}),this.pages=null!=e?e:[];for(const e of this.pages)this.messages.push("function"==typeof e?null:e);for(const e of s)this.actions.set(e.id,e)}setIndex(e){return this.index=e,this}setIdle(e){return this.idle=e,this}setActions(e){return this.actions.clear(),this.addActions(e)}addActions(e){for(const s of e)this.addAction(s);return this}addAction(e){return this.actions.set(e.id,e),this}setPages(e){return this.pages=[],this.messages=[],this.addPages(e),this}addPages(e){for(const s of e)this.addPage(s);return this}addPage(e){return this.pages.push(e),this.messages.push("function"==typeof e?null:e),this}async run(e,s){var t,i;if(await this.resolvePagesOnRun(),!this.messages.length)throw new Error("There are no messages.");if(!this.actions.size)throw new Error("There are no messages.");const n=this.messages[this.index];null!==(t=this.response)&&void 0!==t||(this.response=await s.send(n));for(const e of this.actions.keys())await this.response.react(e);return null!==(i=this.collector)&&void 0!==i||(this.collector=this.response.createReactionCollector(((s,t)=>(this.actions.has(s.emoji.identifier)||this.actions.has(s.emoji.name))&&t.id===e.id),{idle:this.idle}).on("collect",this.handleCollect.bind(this,e,s)).on("end",this.handleEnd.bind(this))),this}async resolvePagesOnRun(){for(let e=0;e<this.pages.length;e++)await this.resolvePage(e)}async resolvePage(e=this.index){var s,t;return this.pages[e]&&(null!==(s=(t=this.messages)[e])&&void 0!==s||(t[e]=await this.pages[e](e,this.pages,this))),this.messages[e]}clone(){const e=new PaginatedMessage({pages:this.pages,actions:[]}).setIndex(this.index).setIdle(this.idle);return e.actions=this.actions,e.response=this.response,e.collector=this.collector,e}async handleCollect(e,s,t,i){var n,a;await t.users.remove(i);const r=null!==(n=this.actions.get(t.emoji.identifier))&&void 0!==n?n:this.actions.get(t.emoji.name),o=this.index;await r.run({handler:this,author:e,channel:s,response:this.response,collector:this.collector}),o!==this.index&&await(null===(a=this.response)||void 0===a?void 0:a.edit(await this.resolvePage()))}async handleEnd(e){this.collector&&(this.collector.removeAllListeners(),this.collector=null),this.response&&!PaginatedMessage.deletionStopReasons.includes(e)&&await this.response.reactions.removeAll()}}Object.defineProperty(PaginatedMessage,"defaultActions",{enumerable:!0,configurable:!0,writable:!0,value:[{id:"🔢",run:async({handler:e,author:s,channel:t})=>{const i=await t.send("What page would you like to jump to?"),n=await t.awaitMessages((e=>e.author.id===s.id),{max:1,idle:15e3}).catch((()=>null));if(n){const s=n.first();if(i.deletable&&await i.delete(),s){s.deletable&&await s.delete();const t=Number(s.content)-1;!isNaN(t)&&e.pages[t]&&(e.index=t)}}}},{id:"⏪",run:({handler:e})=>e.index=0},{id:"◀️",run:({handler:e})=>{0!==e.index&&--e.index}},{id:"▶️",run:({handler:e})=>{e.index!==e.pages.length-1&&++e.index}},{id:"⏩",run:({handler:e})=>e.index=e.pages.length-1},{id:"⏹️",run:async({response:e,collector:s})=>{await e.reactions.removeAll(),s.stop()}}]}),Object.defineProperty(PaginatedMessage,"deletionStopReasons",{enumerable:!0,configurable:!0,writable:!0,value:["messageDelete","channelDelete","guildDelete"]});class LazyPaginatedMessage extends PaginatedMessage{async resolvePagesOnStart(){await this.resolvePage(this.index)}async resolvePage(e=this.index){return await super.resolvePage(e-1),await super.resolvePage(e+1),super.resolvePage(e)}}export{LazyPaginatedMessage,PaginatedMessage,isCategoryChannel,isDMChannel,isGroupChannel,isGuildBasedChannel,isNewsChannel,isStoreChannel,isTextChannel,isVoiceChannel};
//# sourceMappingURL=index.mjs.map
